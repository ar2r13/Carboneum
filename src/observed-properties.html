<script type="text/javascript">
	'use strict'

	function observedProperties (SuperClass) { // eslint-disable-line no-unused-vars
		const privates = new WeakMap()

		return class extends SuperClass {
			constructor() {
				super()
				const observedProperties = this.constructor.observedProperties
				if(!(observedProperties instanceof Array)) {
					privates.set(this, {})
				}
			}

			static get element() {
				return observedPropertiesDecorator(super.element || this)
			}
		}

		function observedPropertiesDecorator(target) { // eslint-disable-line no-unused-vars
			const observedProperties = target.observedProperties
			if(!(observedProperties instanceof Array)) return target

			observedProperties.forEach(prop => defineObserver(prop))

			function defineObserver(prop) {
				const accessor = Object.getOwnPropertyDescriptor(target, prop)
				Object.defineProperty(target, prop, {
					get() {
						return (typeof accessor.get === 'function')
							? accessor.get()
							: void 0
					},
					set(value){
						return (typeof accessor.set === 'function')
							? accessor.set(value)
							: value
					}
				})
			}
		}
	}
</script>
